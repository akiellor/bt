#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '../lib'))

require 'thin'
require 'trollop'
require 'bt/web_console/app'

opts = Trollop::options do
  banner <<-eos
  Starts a web console with information about repository's builds.

Usage: bt-web-console [REPOSITORY]
  eos
end

ENV['REPOSITORY'] = ARGV.shift or raise 'Specify a repository uri'

Thin::Server.start('0.0.0.0', 4567) { run BT::WebConsole::App }
